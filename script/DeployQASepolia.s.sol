// SPDX-License-Identifier: MIT
pragma solidity 0.8.28;

import {Script} from "forge-std/Script.sol";
import {QuantumAccount} from "../src/QuantumAccount.sol";
import {EntryPoint} from "../lib/account-abstraction/contracts/core/EntryPoint.sol";
import {HelperConfig} from "./HelperConfig.s.sol";
import {Falcon} from "../src/Falcon.sol";

contract DeployQASepolia is Script {
    function run()
        external
        returns (QuantumAccount)
    {
        require(block.chainid == 11155111, "Only Sepolia network is supported for this script");
        HelperConfig helperConfig = new HelperConfig();
        EntryPoint entryPoint = helperConfig.getNetworkConfig().entryPoint;
        Falcon falcon = helperConfig.getNetworkConfig().falcon;
        bytes memory domain = helperConfig.getNetworkConfig().domain;
        bytes memory _publicKey = hex"0a6a9a9e8ada39a8928d91509ccda072da3db7be465a1e2d2154ab8d1f07ece3a2964c97d30a827bef6c790612dc211c9621f2e2d55b8c60b45a9e354a4e5a6ed75bb4da1f404eb64c96c2f6a6686888da5909be1c48673ae6189c28d3e6ad12139d58c543362954ed618ae293283465b906efe4e752f20958c3ecc818da47ef0249c8447a5f9659a25757059705e2d4230dd5258b1511f54645b9a80ffb50a1ed775b994fc2b70a3a3b2b0535362e6526a4c983b7348a641fdc82888664f7cb8425e525ab7e0151b0df02921c8b7b9b8d26850552b1a71dd455e9ccbd715591470fd1cedb7ac26d1f1469a5d021b707cd91b95cfa2bc6afe6122c00b6a2070229ba5e4d7e254f68ab0e05e89c42e13b1182d88d772727e26c58cb25b7734543c3498472bd0c50e0e2bc74698c57d4125ab6fb3d8e1424d8e314887719821dc961baac3f6312c59f7a4062442277ce10b72d801b2307b52007ec5871cd396489c69ce02131439dc60d9b768d6ea722ba1162a8a56063ee7bbef9be4c8b50487eb4aeb846c5013618aeeaadbfe394747092cb23600e060bfa668720a3128441e8cc72387a6a218796157694a5e88bfa4b479646b740e437aad8b9d8dc6492d715ad75c830c3d7019ca3d77e2a3a655d2fdc91d390258c1e1680351add56a1890e017ca8415e4aece0d5ea3422ad6849023eaa7a06f383cd3d85e4534e65d6483ee5027dd479ca692dac6c2313ad0dfd5f4838ba6524794450ba8a4e6fc34d8dc17abc5ed10c25586b0a928900bd0635b411ae5f5af6cf7daeee234ad3fe821310caa8ba9b617f6602791abb0e254e26a2578b0521f024a030150441288e1d6bfcb15cac1d7aeb64551ba39f37780d94a79f5df0982c496340d76a107bc51515850a84fba805e05e5f19c12a41588ff1487e7e504fec15c8db813eb9115ca3e3ea5234c2dc385ff88d024b6aa58f4e8fa7e69e77048aa39ecaccc11dbd12bce658ab20f202d5401b68bb96119b26aeb72062ae1bc855983441beae5e3d30a976258326d5107631034388f6e7cc56780eacbd28a96d78b6d62fa65bea5cdb93176abfadb27546f1bb29c46515146e43d71e871b071f57674aa5e2a45b072d0a0adc82b51191b5bd171f5175fb4898e70d00184870332de4b533643673eb294538f5d630a9e0e4002e9601694f47d16f9d678ad02ef417c8669b81224b737ab6a000419b7a168c9a0a5a374eaa2cd3c7b67296867430ccaa95a9391cc3d2bdc6feb030ab56aeca6e48b3fb2dc8ca21b438941ef942f4e129cecfff792834219aa60d59a32a62dce90273e462851b6ab8035f9caabbc1c7a5f8b890438c05b6f3d54eed1429560c5084ee2a421b51341bb715d6f31afa079b622685507013851d89d510ed90a6c86e9bdc283b6992b12961a9aca71d60fbbeccabf69bc2bb7539696cc5b33225e94d8a0170e35478aab311ba2630ae6f60891e299eee00d999d371def29bf52363497f11595da9894530006e001bfd928e6e94c2ccf9da8fe9b46c44ac1bb6caae68aead39e478274c89cec57549082a696cc88e5db4f6096031f1ec15f412297645ad496495ca4b6196455689c8249292072405fe29560e680f035a40851a7fad0fc572a79d8a261f2246276ea37025833022d444c12d5fd492fa3017a8524627e1472251bf790a9d66c21b2918bb28217a83f71b9ddd52bdc335eaea596ac795fd10d151a9bf96ed58bbaeb39ecb20e217da6a64e11c79a8fd640610267238f8b238a33f84d642481f8a0dc34fec622182bd2b088a7ee32475b510729e484c5547d9fa7601000bb44c75713c525085b0f06362c00fe4f0bd3c8c5f051691323e62623966418d0a48e0f67b835e85cf14eec9364266b2054c10025c4cf66c73a4caf52d836fadaa69e94d84639c6020f4bf3cd429815b642da72a8240fc4c57b723ea51465e6165dbb8d644eaa2741256d7859d95f8441af30d9130210d36d936343de25f4286102c98432d3da32366020e826f08a2c043de4f00426cde5c7b1d6889ef0e73422d3b9668f839bd5cd117447a29e0ef442751e09e27a730c3306892d64ea0894b99a97ca088e2bb942f3129c0977d94864b5f841aa9dc563ac2ca4be5bd3167148a95d1d025c7638e158a516c0d8486382c050d67aede22c0e0432f25a534d638a1d5072329c1ee97a892b87b014263a8ace430a1be2663d7871b116a7ae12f40960d4855c2149cc379f888ebe195a9a815a17dd6c435ad929a03147eb808f9adcaeaf5d86ec06fde1e395528aa74ecccbf35804462cce233ba604e142f569d58c48077b05f707bec5c4218180d215fec155c8561b3e2509aeed1cdb3b65e6b62af9f39e535352cd1130069ca87e2ca51a0de996ee9033bda60449d424add4abff0b9be1af8f9c7f66e4649776a5f5c4d66d110a5592274c69f28a8c682712ceef6387d695aa20c16c4ea3a66fea9a6404d7c7a4100e1d331eea5472f82c068b0b2460774365bd230c15bb2f8b5e1a29690ed13643a86";

        vm.startBroadcast();
        QuantumAccount quantumAccount =
            new QuantumAccount(address(entryPoint), msg.sender, address(falcon), domain, _publicKey);
        vm.stopBroadcast();
        return (quantumAccount);
    }
}