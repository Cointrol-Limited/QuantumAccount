// SPDX-License-Identifier: MIT
pragma solidity 0.8.28;

import {Test, console2 as console} from "forge-std/Test.sol";
import {HelperConfig} from "../script/HelperConfig.s.sol";
import {EntryPoint} from "../lib/account-abstraction/contracts/core/EntryPoint.sol";
import {PackedUserOperation} from "../lib/account-abstraction/contracts/interfaces/PackedUserOperation.sol";

contract SepoliaQA is Test {
    bool genHash = false;
    EntryPoint entryPoint;

    address senderAddress = 0xC1C72BEA860b1F85F08CbAaFFfcd59F13A8Ea72a;

    //userOpHash (nonce 0): 0xc65a16a9420b6feb12de66c0e759dd21fd380f287a1bdcce66c9f7dec4591e74
    //userOpHash (nonce 1): 0xd108fa116ae1ca7774d8ce2eff1031b13789685e01d1c6052d8db94407bd1faa

    PackedUserOperation userOp = PackedUserOperation({
                    sender: address(senderAddress),
                    nonce: 0,
                    initCode: hex"",
                    callData: hex"",
                    accountGasLimits: 0x00000000000000000000000000FFFFFF00000000000000000000000000030D40,
                    preVerificationGas: 16777215,
                    gasFees: 0x0000000000000000000000003b9aca00000000000000000000000000b2d05e00,
                    paymasterAndData: hex"",
                    signature: hex"144f9df2da6ded16abb7facabd2d15adde07f1c8d0e2923d61d672628750cb7cc9122d2272e0e35900382fbb2fb72f8a2f702f7f00302f850023005201272f9e2efd2f7d008f00c90043009800892f992f98002b00032fd200f72f7f2fa22ffd2f872e7d2f912f912f9c2ef1010d00412fdd00ca015000e42f730001013200922fe400812fe82ffa00a22fde2f5700a3002b2fff2f6b0069004e007c2ff52fb02faa006b000f2fa200442f082f382fc32f522f7e0040008a2f2800132f9a2fd90054006a0137008800f92f6e2f92010c011e00542fa92fc1004b00152f97002f2fef2f912f732fe5001f001b2f572fbc00c52f2200bb2f712fa5000b2e230096005b00a500eb00562f7f2fc500c2006d2e972f9f003a00a600c0010f2f5a2ee42fea009a2fd3009200272f6200962f7e2ff72f0a2fed2f812f9000952fea2ff700262fd42ff12fb200c42f6e00092f4b00e22efb2f980035007f003e2f58001c2faa00b02f9c2f8f2ff22e512e5c2f352f772f7f2ff000ef007f00490083008b2f6f2f6a006c2fbf000d2f4c00812f9f004a2f9c006500de01602efc00272fa22f730106004b00ab001c00860089006e2f02016100302fd6002a00620132002b2f6200432f762f6e2fca01032f122f132f712fd02fa0001e2f872e8c00d42f7400942fca2f63008a2fea00012ed22f892fde2f4700dc00772eb92f5f007800272f312fd000012f8a00ac2f9201252ff02fc300a22f452fe200662fde2f6e00792feb2f5f004e2d852faa30002f1c2f6200d72f982eac00532fe32e7d2f130050008f2feb2fc02f802fd3010b00842f062fe12f852fb32f1800c10134018700652fa500492ed02fc02f322ffa2fcc00c7000f2f272f982ff82fbb002c2e7f00ed2f7000812eaf2fd62f0e004b001b008100b92f5d002f2f1d00a000ff2fe02fea00152f4300c92ff12f8a01002f9201292fc300052f3f00572ffc00c82f3d2ec40040007500142fad008b2fd100e600882e6f2f630085000b00672fd32f492f442f812fb42f752fb02fb8004d0008007f2f602f08005f2ff40111012f0046010a2fdc2ff42f642f142f432ff82fda2e0d2f2e00a82f960120002a2f2b00bb00152f94007f2fdb2e932fd800cb0081002700352f73014801902f6f2f7e00122f692fe02f3a2fc92f12003600402fb02fd10067010500e12f862ff92fc400922fd72f2b2fd400132f8a006b003c00be2f6c004a00172f6801292fff016800632fcf00ac006600712fa50012005d2f2801132fa82fc2000e00b400862ff62fbc2f72000e2fce2ff52f6d00b800f800372fe22fa9006e2f692f73003b004100bb2fd22fd62eb42f472ffc00cf2f1100a82e832fe92fa9006000db2fea2f60004300862fec2e9f01892f15002d006a2fdb00962efe00a8002b00c6004f00f22f620042005c2f3400022dac00462fd92fd32f7400d62fe500aa2f700118001600de00b42f5c00dc00162f8a2ffb2ffe2fff2fff2e662fa600c62fd22f4b2ffc2f8d2fba003c012700de2f7d007000cf00742fed008d0166014a2f85002501542ed12f4f00b72fd42f8a00d72f8f2fc82fc5009b2f75000900c501412fef2fc82f8a2f45008d2f8000952f9300ef011300f22f762f4c000e2fce2f5d2ee52ffe00332eae2f932faa007000a200162fc9004c015200fe00262f6a2f552fd7003500c300442ede2f3d0248000e2f742f5c00a22fc4006e2f2c00d52f9c01350084009b004f2fa700022f812ff32ffc2fd72e3c006f008f00112f81003e2e9101662fab2f16300001010062006500dd005e01822f82018a2f9a2f5100d70028007d005a0068000100c52ee500202ffd00092f2500c7000b003a0097001f009f00342f2f2ff800002fad2f2a2fd12f022f9100f62fac003a2fbe2f6700c72ff52f352fbe2f4700e400d72fb72ece0089000e014e2ea4004a2eec014c2f81002d00a6005500692e932e7100672ef500c72f412ee201422f3500ee00b52f3f000b00b12fdb2edf008b2ffd2f3700bc00792f652f8f2f87008300ba2ee12ec02f04001c00292ec72f9a00d92fbd2fb92f5901bb00950061006900dd00262fde0113004400802e7b2f8500bb001f2f7d00a92fcf00812fb72ed1001e00412f77001c005800b42f132f4c2f53006e00522f71008e2f69012b2eda2fbb2f35000100f82fca2ed92fe32f75012400182f5c00312e0f2efd0046011b2fb22fd600c000ce005600632fc800622ef6006800332f9a00f22f8f00322f102fd82fbd2f7b00042f732f87000a2fd72f7500ae00612e9100902f920152009400142ee5003900c02ef52f7e2fc12fb82ff100392f990111004d0083009e2f6400132fae2ff22ff32fb700412e8e2fdb009f000d2f552feb003b008b2f8e00ff2fa02fc72fa62efb2e1a2fd8007e2fb700842f5e2f63006200112fde2fff2fc62fd92ecf2f8900c12fe200bc300000542fe70068005b004e2f9a2f5a2fd6011500cc2f4e0051007e2fb200a32f8a0007004a2f8d0129002100582f242fd22fb2000a003a000a2f9a001d2f9d01bc2f902f8200182ff02f7f2ffd2fe8009a2fcf2f0700c72fdf2f9e2f970003001200e300062e1a2f592ffc00d201182fb72fd42f8b2fef001900022f53005e008d0090022c2f6e00192ffc2fab00b1009c2f442f312f562fb9004d001f00a02fa500062feb2f9b004f2f472f8e2f3b2ee12f792f7b2f920075001a000c2fa4016e2f6c2fdf2fac2fb20063006900b300eb01b2018200102f6e00532e94008e2ff300892f582f8b002e2fc10052015e2fd32fdb001c2f902eb72ec100b701262f482fc52fcf2f532ecf2f8e0031005e003c2fd3000230002fc000f92fb22fac2f3d2fea2f342fa72fd100962ea22e132fb22fd5004400412f9a2f9c2f752ffc2f1500352fea00ba2df0"
    });

    function setUp() external {
            HelperConfig helperConfig = new HelperConfig();
            entryPoint = helperConfig.getNetworkConfig().entryPoint;
    }

    function testGenerateOpHash() public {
        if (genHash){
            bytes memory callData = abi.encodeWithSelector(
                bytes4(0xb61d27f6),                       // execute(address,uint256,bytes)
                address(0x78dFD9B2170b8A1b4C7B103BE8a5498858B39914),
                0.1 ether,
                bytes("")                                 // or the real calldata for dest
            );
            userOp.callData = callData;
            bytes32 getUserOpHash = entryPoint.getUserOpHash(userOp);
            console.logBytes32(getUserOpHash);
        } else {
            return;
        }
    }

}